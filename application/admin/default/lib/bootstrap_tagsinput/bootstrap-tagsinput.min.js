/*
 ##########################################################
## This script is copyrighted to ArcadeBooster.com and you
## are free to modify the script but duplication, selling
## or transferring of this script is a violation of the
## copyright and purchase agreement.
##
## File Name: bootstrap-tagsinput.min.js
## Version : 1.5.7.4
## Date : 2015-06-04   18:43:55
##########################################################
 */
(function(d){function g(a,c){this.itemsArray=[];this.$element=d(a);this.$element.hide();this.multiple=(this.isSelect="SELECT"===a.tagName)&&a.hasAttribute("multiple");this.objectItems=c&&c.itemValue;this.placeholderText=a.hasAttribute("placeholder")?this.$element.attr("placeholder"):"";this.inputSize=Math.max(1,this.placeholderText.length);this.$container=d('<div class="bootstrap-tagsinput '+d(a).attr("class")+'"></div>');this.$input=d('<input size="'+this.inputSize+'" type="text" placeholder="'+
this.placeholderText+'"/>').appendTo(this.$container);this.$element.after(this.$container);this.build(c)}function k(a,c){if("function"!==typeof a[c]){var b=a[c];a[c]=function(a){return a[b]}}}function h(a){return a?n.text(a).html():""}function l(a){var c=0;if(document.selection)a.focus(),c=document.selection.createRange(),c.moveStart("character",-a.value.length),c=c.text.length;else if(a.selectionStart||"0"==a.selectionStart)c=a.selectionStart;return c}var m={tagClass:function(){return"label label-info"},
itemValue:function(a){return a?a.toString():a},itemText:function(a){return this.itemValue(a)},freeInput:!0,maxTags:void 0,confirmKeys:[13],onTagExists:function(a,c){c.hide().fadeIn()}};g.prototype={constructor:g,add:function(a,c){var b=this;if(!(b.options.maxTags&&b.itemsArray.length>=b.options.maxTags)&&(!1===a||a)){if("object"===typeof a&&!b.objectItems)throw"Can't add objects when itemValue option is not set";if(!a.toString().match(/^\s*$/)){b.isSelect&&(!b.multiple&&0<b.itemsArray.length)&&b.remove(b.itemsArray[0]);
if("string"===typeof a&&"INPUT"===this.$element[0].tagName){var e=a.split(",");if(1<e.length){for(var f=0;f<e.length;f++)this.add(e[f],!0);c||b.pushVal();return}}var i=b.options.itemValue(a),e=b.options.itemText(a),f=b.options.tagClass(a),j=d.grep(b.itemsArray,function(a){return b.options.itemValue(a)===i})[0];j?b.options.onTagExists&&(e=d(".tag",b.$container).filter(function(){return d(this).data("item")===j}),b.options.onTagExists(a,e)):(b.itemsArray.push(a),f=d('<span class="tag '+h(f)+'">'+h(e)+
'<span data-role="remove"></span></span>'),f.data("item",a),b.findInputWrapper().before(f),f.after(" "),b.isSelect&&!d('option[value="'+escape(i)+'"]',b.$element)[0]&&(e=d("<option selected>"+h(e)+"</option>"),e.data("item",a),e.attr("value",i),b.$element.append(e)),c||b.pushVal(),b.options.maxTags===b.itemsArray.length&&b.$container.addClass("bootstrap-tagsinput-max"),b.$element.trigger(d.Event("itemAdded",{item:a})))}}},remove:function(a,c){var b=this;b.objectItems&&(a="object"===typeof a?d.grep(b.itemsArray,
function(c){return b.options.itemValue(c)==b.options.itemValue(a)})[0]:d.grep(b.itemsArray,function(c){return b.options.itemValue(c)==a})[0]);a&&(d(".tag",b.$container).filter(function(){return d(this).data("item")===a}).remove(),d("option",b.$element).filter(function(){return d(this).data("item")===a}).remove(),b.itemsArray.splice(d.inArray(a,b.itemsArray),1));c||b.pushVal();b.options.maxTags>b.itemsArray.length&&b.$container.removeClass("bootstrap-tagsinput-max");b.$element.trigger(d.Event("itemRemoved",
{item:a}))},removeAll:function(){d(".tag",this.$container).remove();for(d("option",this.$element).remove();0<this.itemsArray.length;)this.itemsArray.pop();this.pushVal();this.options.maxTags&&!this.isEnabled()&&this.enable()},refresh:function(){var a=this;d(".tag",a.$container).each(function(){var c=d(this),b=c.data("item"),e=a.options.itemValue(b),f=a.options.itemText(b),i=a.options.tagClass(b);c.attr("class",null);c.addClass("tag "+h(i));c.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=
h(f);a.isSelect&&d("option",a.$element).filter(function(){return d(this).data("item")===b}).attr("value",e)})},items:function(){return this.itemsArray},pushVal:function(){var a=this,c=d.map(a.items(),function(c){return a.options.itemValue(c).toString()});a.$element.val(c,!0).trigger("change")},build:function(a){var c=this;c.options=d.extend({},m,a);var b=c.options.typeahead||{};c.objectItems&&(c.options.freeInput=!1);k(c.options,"itemValue");k(c.options,"itemText");k(c.options,"tagClass");c.options.source&&
(b.source=c.options.source);if(b.source&&d.fn.typeahead){if("function"!==typeof b.source){var e=b.source;b.source=function(){return e}}c.$input.typeahead({source:function(a,e){function j(a){for(var b=[],d=0;d<a.length;d++){var f=c.options.itemText(a[d]);h[f]=a[d];b.push(f)}e(b)}var h=this.map={},g=b.source(a);d.isFunction(g.success)?g.success(j):d.when(g).then(j)},updater:function(a){c.add(this.map[a])},matcher:function(a){return-1!==a.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(a){return a.sort()},
highlighter:function(a){return a.replace(RegExp("("+this.query+")","gi"),"<strong>$1</strong>")}})}c.$container.on("click",d.proxy(function(){c.$input.focus()},c));c.$container.on("keydown","input",d.proxy(function(a){var b=d(a.target),e=c.findInputWrapper();switch(a.which){case 8:0===l(b[0])&&(e=e.prev())&&c.remove(e.data("item"));break;case 46:0===l(b[0])&&(e=e.next())&&c.remove(e.data("item"));break;case 37:a=e.prev();0===b.val().length&&a[0]&&(a.before(e),b.focus());break;case 39:a=e.next();0===
b.val().length&&a[0]&&(a.after(e),b.focus());break;default:c.options.freeInput&&0<=d.inArray(a.which,c.options.confirmKeys)&&(c.add(b.val()),b.val(""),a.preventDefault())}b.attr("size",Math.max(this.inputSize,b.val().length))},c));c.$container.on("click","[data-role=remove]",d.proxy(function(a){c.remove(d(a.target).closest(".tag").data("item"))},c));c.options.itemValue===m.itemValue&&("INPUT"===c.$element[0].tagName?c.add(c.$element.val()):d("option",c.$element).each(function(){c.add(d(this).attr("value"),
!0)}))},destroy:function(){this.$container.off("keypress","input");this.$container.off("click","[role=remove]");this.$container.remove();this.$element.removeData("tagsinput");this.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var a=this.$input[0],c=this.$container[0];a&&a.parentNode!==c;)a=a.parentNode;return d(a)}};d.fn.tagsinput=function(a,c){var b=[];this.each(function(){var e=d(this).data("tagsinput");e?(e=e[a](c),void 0!==
e&&b.push(e)):(e=new g(this,a),d(this).data("tagsinput",e),b.push(e),"SELECT"===this.tagName&&d("option",d(this)).attr("selected","selected"),d(this).val(d(this).val()))});return"string"==typeof a?1<b.length?b:b[0]:b};d.fn.tagsinput.Constructor=g;var n=d("<div />");d(function(){d("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})})(window.jQuery);
